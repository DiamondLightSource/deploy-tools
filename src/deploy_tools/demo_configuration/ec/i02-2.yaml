# yaml-language-server: $schema=/workspaces/deploy-tools/src/deploy_tools/models/schemas/release.json

module:
  name: ec
  version: i02-2
  description: ec command line tool configured for i02-2
  allow_updates: true

  dependencies:
    - name: edge-containers-cli
    - name: k8s-i02-2
      version: local

  env_vars:
    - name: EC_TARGET
      value: i02-2-beamline/i02-2
    - name: EC_K8S_NAMESPACE
      value: i02-2-beamline
    - name: EC_SERVICES_REPO
      value: https://gitlab.diamond.ac.uk/controls/containers/beamline/i02-2-services.git

  applications: []

  load_script:
    - system kubectl config set-context --current --namespace=i02-2-beamline

  unload_script:
    - system kubectl config set-context --current --namespace=$env(USER)
